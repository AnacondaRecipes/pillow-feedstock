From 08db23c61cce62b19a3b68bf2acf8cdfb8f668fb Mon Sep 17 00:00:00 2001
From: Andrew Murray <radarhere@users.noreply.github.com>
Date: Mon, 18 Jul 2022 16:16:06 +1000
Subject: [PATCH] Do not quote Pillow version for setuptools >= 60

---
 setup.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/setup.py b/setup.py
index 71e853dcee..37477216d3 100755
--- a/setup.py
+++ b/setup.py
@@ -15,7 +15,9 @@
 import sys
 import warnings
 
-from setuptools import Extension, setup
+from setuptools import Extension
+from setuptools import __version__ as setuptools_version
+from setuptools import setup
 from setuptools.command.build_ext import build_ext
 
 
@@ -850,6 +852,7 @@ def build_extensions(self):
             sys.platform == "win32"
             and sys.version_info < (3, 9)
             and not (PLATFORM_PYPY or PLATFORM_MINGW)
+            and int(setuptools_version.split(".")[0]) < 60
         ):
             defs.append(("PILLOW_VERSION", f'"\\"{PILLOW_VERSION}\\""'))
         else: